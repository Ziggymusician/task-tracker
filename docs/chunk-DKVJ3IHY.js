import{a as D,b as K,c as Q,d as W,e as X}from"./chunk-WECCE4GW.js";import{$ as H,B as h,D as P,E as j,F as p,H as L,I as R,J as C,K as _,L as r,M as a,N as $,O as v,P as k,Q as u,U as l,V as w,W as b,Y as g,Z as A,_ as U,a as M,b as F,ca as q,fa as z,ia as G,ja as J,l as V,m,p as I,r as d,s as f,t as B,v as N,w as x,y as c,z as O}from"./chunk-77MQNM7F.js";function et(n,e){n&1&&(r(0,"div"),B(),r(1,"svg",6),$(2,"path",7),a()())}var T=class n{ticket;get type(){return Q(K,this.ticket.type)}get mainContainerFlagggedClasses(){return{"border-red-300 shadow-red-300":this.ticket.isFlagged}}get typeClasses(){return{"bg-red-500  border-red-600":this.ticket.type===0,"bg-slate-500 border-slate-600":this.ticket.type===3,"bg-green-500 border-green-600":this.ticket.type===1,"bg-blue-500 border-blue-600":this.ticket.type===2}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["ticket-mini-card"]],inputs:{ticket:"ticket"},standalone:!0,features:[g],decls:10,vars:6,consts:[[1,"bg-white","border","shadow-sm","rounded-lg",3,"ngClass"],[1,"px-2","pt-2"],[1,"font-thin","text-sm","uppercase"],[1,"text-sm","my-2"],[1,"relative","flex","justify-between","mt-2","p-2","rounded-b-lg","shadow-sm","bg-gray-100"],[1,"text-xs","font-bold","text-white","px-3","py-1","border","rounded-full","uppercase",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","rgb(220 38 38 / 1)","viewBox","0 0 24 24","stroke-width","1.5","stroke","rgb(185 28 28 / 1)",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"span",2),l(3),a(),r(4,"p",3),l(5),a()(),r(6,"div",4)(7,"span",5),l(8),a(),P(9,et,3,0,"div"),a()()),t&2&&(p("ngClass",i.mainContainerFlagggedClasses),c(3),w(i.ticket.id),c(2),w(i.ticket.title),c(2),p("ngClass",i.typeClasses),c(),b(" ",i.type," "),c(),L(i.ticket.isFlagged?9:-1))},dependencies:[z],styles:["[_nghost-%COMP%]{display:block;cursor:pointer}"]})};var S=class n{constructor(){}transform(e,t){return e.filter(i=>i.status===t)}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=I({name:"filterByStatus",type:n,pure:!1,standalone:!0})};var it=(n,e)=>e.id;function nt(n,e){if(n&1){let t=v();r(0,"ticket-mini-card",4),k("drop",function(o){d(t);let s=u();return f(s.onDrop(o))})("dragstart",function(o){let s=d(t).$implicit,tt=u();return f(tt.onDragStart.bind(null,s,o).call(o))})("click",function(){let o=d(t).$implicit,s=u();return f(s.onViewTicket(o.id||""))}),a()}if(n&2){let t=e.$implicit;p("ticket",t)}}var y=class n{updateTicket=new N;tickets=x([]);status=x.required();heading=q(()=>W(this.status()));router=V(G);onDrop(e){e.preventDefault();let t=e.dataTransfer?.getData("text"),i=this.tickets().find(s=>s.id===t);if(!i||i.isFlagged)return;let o=e.target.getAttribute("data-status");o&&(i.status===3&&+o<3||i.status===4||this.updateTicket.emit(F(M({},i),{status:+o})))}onDragOver(e){e.preventDefault()}onDragStart(e,t){t.dataTransfer?.setData("text",e.id||"")}onViewTicket(e){this.router.navigate([`/${e}`])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["status-column"]],inputs:{tickets:[1,"tickets"],status:[1,"status"]},outputs:{updateTicket:"updateTicket"},standalone:!0,features:[g],decls:7,vars:5,consts:[[1,"bg-gray-200","h-full","w-60","rounded-lg","mt-2","shadow-md",3,"drop","dragover"],[1,"py-2","bg-slate-800","rounded-t-lg","font-bold","text-center","text-white","select-none"],[1,"flex-1","mt-3","mx-3","space-y-3"],["draggable","true",3,"ticket"],["draggable","true",3,"drop","dragstart","click","ticket"]],template:function(t,i){t&1&&(r(0,"div",0),k("drop",function(s){return i.onDrop(s)})("dragover",function(s){return i.onDragOver(s)}),r(1,"div",1),l(2),a(),r(3,"div",2),C(4,nt,1,1,"ticket-mini-card",3,it),U(6,"filterByStatus"),a()()),t&2&&(j("data-status",i.status()),c(2),b(" ",i.heading()," "),c(2),_(H(6,2,i.tickets(),i.status())))},dependencies:[T,S],styles:["[_nghost-%COMP%]{display:block;height:calc(100vh - 11rem)}"]})};var rt=n=>["/",n];function ot(n,e){if(n&1){let t=v();r(0,"status-column",5),k("updateTicket",function(o){d(t);let s=u();return f(s.onUpdateTicket(o))}),a()}if(n&2){let t=e.$implicit,i=u();p("status",t)("tickets",i.tickets())}}var Z=class n{constructor(e){this.ticketService=e}statuses=h(Object.values(D).filter(e=>!isNaN(e))).asReadonly();tickets=h([]);ngOnInit(){this.tickets.set(this.ticketService.getTickets())}onUpdateTicket(e){this.ticketService.updateTicket(e)}static \u0275fac=function(t){return new(t||n)(O(X))};static \u0275cmp=m({type:n,selectors:[["app-board"]],standalone:!0,features:[g],decls:7,vars:3,consts:[[1,"flex","flex-col","items-center","justify-center"],[1,"w-full","flex","justify-center","py-2"],[1,"bg-green-600","hover:bg-green-500","hover:scale-105","transition-all","duration-150","py-1","px-5","mt-1","rounded-md","font-bold","text-white",3,"routerLink"],[1,"flex","space-x-4"],[3,"status","tickets"],[3,"updateTicket","status","tickets"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),l(3," + Add "),a()(),r(4,"div",3),C(5,ot,1,2,"status-column",4,R),a()()),t&2&&(c(2),p("routerLink",A(1,rt,"Ticket-"+(i.tickets().length+1))),c(3),_(i.statuses()))},dependencies:[J,y],styles:["[_nghost-%COMP%]{display:block}"]})};export{Z as BoardComponent};
